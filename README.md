# üöÄ marz-backuper

**Marz-Backuper** ‚Äî —ç—Ç–æ Telegram-–±–æ—Ç –Ω–∞ Python, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏ —Ä—É—á–Ω–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞–Ω–µ–ª–∏ **Marzban** —Å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ SSH. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –∏–∑ Telegram, –¥–∞–Ω–Ω—ã–µ –∞—Ä—Ö–∏–≤–∏—Ä—É—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —á–∞—Ç.

---

## üîß –ß—Ç–æ —É–º–µ–µ—Ç –±–æ—Ç

- –ü–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –ø–æ SSH –∫ –º–Ω–æ–∂–µ—Å—Ç–≤—É —Å–µ—Ä–≤–µ—Ä–æ–≤
- –°–∫–∞—á–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ Marzban –∏–∑ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤ `.zip` –∏–ª–∏ `.tar.gz`
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∞—Ä—Ö–∏–≤ –±—ç–∫–∞–ø–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –≤ Telegram
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ backup –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- –•—Ä–∞–Ω–∏—Ç—å –∞—Ä—Ö–∏–≤—ã –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —É–¥–∞–ª—è—Ç—å –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–æ–≤
- –†–∞–±–æ—Ç–∞—Ç—å *—Ç–æ–ª—å–∫–æ* —Å –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏ Telegram ID (admin filter)

---

## ‚öôÔ∏è –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **SSH-—Å–µ—Å—Å–∏—è** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ IP, –ø–æ—Ä—Ç—É –∏ –ª–æ–≥–∏–Ω—É/–ø–∞—Ä–æ–ª—é.
2. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–≤–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
   - `/opt/marzban`
   - `/var/lib/marzban`
3. –°–∫–∞—á–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.
4. –°–æ–∑–¥–∞—ë—Ç—Å—è –∞—Ä—Ö–∏–≤ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (`zip`/`tar.gz`).
5. –ê—Ä—Ö–∏–≤:
   - –ª–∏–±–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏ —É–¥–∞–ª—è–µ—Ç—Å—è (–µ—Å–ª–∏ `local: false`)
   - –ª–∏–±–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ `tmp/`
6. –í —Å–ª—É—á–∞–µ –∞–≤—Ç–æ-–±—ç–∫–∞–ø–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (APScheduler) –ø–æ `HH:MM` –∏–∑ `config.yml`.

---

## üí¨ –ö–æ–º–∞–Ω–¥—ã Telegram

| –ö–æ–º–∞–Ω–¥–∞                      | –î–æ—Å—Ç—É–ø      | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 |
|------------------------------|-------------|--------------------------------------------------------------------------|
| `/start`                     | –í—Å–µ         | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ                                           |
| `/help`                      | –í—Å–µ         | –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏ –ª–æ–≥–∏–∫–∞                                                     |
| `/backup [HH:MM]`            | –ê–¥–º–∏–Ω       | –ë—ç–∫–∞–ø —Å—Ä–∞–∑—É –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞                              |
| `/send_backup <IP>`          | –ê–¥–º–∏–Ω       | –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ IP                                      |
| `/list_backups`              | –ê–¥–º–∏–Ω       | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∞—Ä—Ö–∏–≤–æ–≤                                   |
| `/clear_backups`             | –ê–¥–º–∏–Ω       | –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –∞—Ä—Ö–∏–≤—ã –≤—Ä—É—á–Ω—É—é                                       |
| `/status`                    | –ê–¥–º–∏–Ω       | –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –∞—Ä—Ö–∏–≤–∞, —Å–ª–µ–¥. –∑–∞–ø—É—Å–∫, —Å–∫–æ–ª—å–∫–æ –∞—Ä—Ö–∏–≤–æ–≤ –≤ `tmp/`           |

---

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `config.yml`

<code><pre>bot:
token: "TELEGRAM_BOT_TOKEN"
admin_id:
- 123456789 # –≤–∞—à–∏ Telegram user_id

servers:

name: server1
ip: 192.168.1.101
port: 22
login: root
password: your_password
backup_filename: backup

backup:
local: true # —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–∏ –∞—Ä—Ö–∏–≤—ã –ª–æ–∫–∞–ª—å–Ω–æ
auto: "03:00" # –≤—Ä–µ–º—è –∞–≤—Ç–æ-–±—ç–∫–∞–ø–∞
format: "zip" # zip –∏–ª–∏ tar.gz</pre></code>

